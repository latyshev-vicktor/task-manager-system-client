@if (sprint(); as sprint) {
  <div class="page">
    <!-- Sprint Header Card -->
    <div tuiCardLarge class="sprint-header-card">
      <header tuiHeader class="sprint-header">
        <div class="header-content">
          <div class="title-section">
            <h1 tuiTitle class="sprint-title">{{ sprint.name }}</h1>
            <div class="status-badge">
              <tui-badge
                tuiStatus
                [appearance]="statusColor"
                size="l">
                {{ sprint.sprintStatus.description }}
              </tui-badge>
            </div>
          </div>
          
          @if (sprint.sprintStatus.name !== 'Completed') {
            <button
              tuiButton
              appearance="primary"
              size="m"
              (click)="openEdit()"
              [iconStart]="'@tui.pen'">
              Редактировать
            </button>
          }
        </div>
      </header>

      <!-- Sprint Info -->
      <div class="sprint-info">
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Дата начала</div>
            <div class="info-value">{{ sprint.startDate | date : 'dd.MM.yyyy' }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Дата окончания</div>
            <div class="info-value">{{ sprint.endDate | date : 'dd.MM.yyyy' }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Осталось дней</div>
            <div class="info-value" [class.warning]="daysRemaining < 7">
              {{ daysRemaining > 0 ? daysRemaining : 'Завершен' }}
            </div>
          </div>
          <div class="info-item">
            <div class="info-label">Пройдено</div>
            <div class="info-value">{{ progressPercentage | number:'1.0-0' }}%</div>
          </div>
        </div>

        @if (sprint.description) {
          <div class="description-section">
            <h3 class="section-title">Описание</h3>
            <p class="description">{{ sprint.description }}</p>
          </div>
        }

        @if (sprint.fieldActivities && sprint.fieldActivities.length > 0) {
          <div class="field-activities-section">
            <h3 class="section-title">Сферы деятельности</h3>
            <div class="activities-tags">
              @for (activity of sprint.fieldActivities; track activity.id) {
                <tui-badge
                  appearance="warning"
                  size="l">
                  {{ activity.name }}
                </tui-badge>
              }
            </div>
          </div>
        }
      </div>
    </div>

    <!-- Targets Section -->
    <div class="section-block">
      <app-targets-list [sprintId]="sprint.id" />
    </div>

    <!-- Weeks Section -->
    <div class="section-block">
      <div class="section-header">
        <h2 class="section-title-large">Недели спринта</h2>
        <p class="section-subtitle">Распределите задачи по неделям</p>
      </div>
      <app-weeks-list [sprintId]="sprint.id" />
    </div>
  </div>
}